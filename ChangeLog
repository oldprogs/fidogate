Fri Nov  1 13:25:29 1996  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* doc/fidogate.texi (Example Point): added that EchoMail4D is
	  reqired.

	* src/toss/ftntoss.c (do_echomail): moved tl_clear() for SEEN-BY,
	  PATH after path check, so that bad messages still contain the
	  original SEEN-BYs and PATH.

	* sendmail/mailer/ftn.m4: mailer ftna runs
	      rfc2ftn -a $h -u $h -O %S/out/$h 
	  writing output packets in a separate directory. This requires
	  running the tosser afterwards because from/to addresses of the
	  packet are the same ($h).
    	
	* src/gate/ftn2rfc.c (main): use str_expand_name() for -I.

	* src/toss/ftnpack.c (main): same + use BUF_COPY3(), also for -O.

	* src/toss/ftnroute.c (main): same + use BUF_COPY3().

	* src/toss/ftntoss.c (main): use str_expand_name() for -I.

	* src/common/packet.c (pkt_outdir): use str_expand_name(), so that
	  %S/%L/%O can be used.
	  (pkt_baddir): same.

	* src/toss/runtoss.sh: added -p for "runtoss out".

	* doc/fidogate.texi (ftntoss): added -p --passthru option.

	* src/toss/ftntoss.c (usage): new -p --passthru option.
	  (main): implemented -p --passthru.
	  (do_echomail): only toss for own address if p_flag is FALSE.

	* doc/fidogate.texi (Example Point 2): new section for setup with
	  2 point addresses. Not yet complete.

	------- CVS ci -------------------------------------------------------

	* src/gate/rfc2ftn.c (rfc_parse): new argument gw, if TRUE enables
	  cf_gateway() checking and address/name replacement.
	  (mail_receiver): call rfc_parse() with gw=TRUE.
	  (mail_sender): call rfc_parse() with gw=FALSE, fixing the bug
	  that also the sender was set to UUCP when Gateway Z:N/F.P was
	  enabled in config.gate.

	* test/tc.gate9/run (Subject): new test case for "Gateway" config
	  statement. 

Mon Oct 28 22:04:56 1996  Martin Junius  <mj@fido.de>

	* test/tc.point2/run: new test case to setup with 2 different
	  point addresses and 2 different uplinks.

Sun Oct 27 13:33:33 1996  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* test/tc.8bit/run: new test case for testing char conversion
 	  quoted-printable -> rfc2ftn -> ftn2rfc ->
 	  ascii/8bit/quoted-printable.

	* src/common/charset.c (xtab[][][]): improved ISO LATIN-1 ->
	  ASCII/8BIT/QP conversion table.

	* src/toss/rununpack.sh: check that an archiver program for the
	  archiver type was found.

	* src/common/config.c (cf_p_aliases, areas, hosts, passwd,
	  packing, routing): char buf[] replaced with
	  char *pval.
	  (cf_p_inbound): new function returning config Inbound.
	  (cf_p_pinbound): new function returning config PInbound,
	  fallback is Inbound.
	  (cf_p_uuinbound): new function returning config UUInbound,
	  fallback is Inbound.

	* doc/fidogate.texi (Areas): added -Q.
	  (Config): added NetMail8bit, NetMailQuotedPrintable.
	  (Config): changed Inbound, PInbound, added UUInbound.

	* config.h (CHARSET_8BIT): removed.

Tue Oct 22 20:52:14 1996  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* src/common/rfcaddr.c (rfcaddr_from_ftn): call charset_xlate()
	  with cidx=0.

	* src/common/charset.c (charset_xlate): additional arg cidx, used
	  as index for xtab[][][].

	* src/common/message.c (msg_xlate_line): call charset_xlate() with
	  new arg cidx.

	* src/common/charset.c (xtab): extended to 3d array, left index is
	  type of conversion 0=US-ASCII, 1=ISO-8859-1 8BIT, 2=ISO-8859-1 QP.

	* src/common/message.c (msg_xlate_line): new cvt8 argument.

	* src/gate/ftn2rfc.c (news_msg): initialize all Area fields.
	  (netmail_8bit, netmail_qp): new flags for config.gate
	  "NetMail8bit", "NetMailQuotedPrintable".
	  (main): get "NetMail8bit", "NetMailQuotedPrintable" from config.gate.
	  (unpack): output MIME-Version, Content-Type,
	  Content-Transfer-Encoding headers dependend on cvt8 flag
	  settings (AREA_8BIT | AREA_QP).
	  (unpack): moved check for mail or news before message body
	  conversion (must set cvt8 before).
	  (unpack): pass cvt8 / 0 as additional parameter to msg_xlate_line().

	* src/common/areas.c (areas_init): implemented -Q option.

	* src/include/structs.h (AREA_QP): new #define for -Q option.

Sun Oct 20 10:53:14 1996  Martin Junius  <mj@fido.de>

	------- CVS ci -------------------------------------------------------

	* test/tc.gate6/run: added test with a large mail message >660K to
	  test for correct computation of number of split messages.

	* version.h (PATCHLEVEL): set to 1.

	* src/gate/rfc2ftn.c (snd_mail): initialize from_is_local = FALSE.
	  (snd_message): run same algorithm to compute number of parts as
	  done for the actual splitting.

	* src/common/address.c (addr_is_domain): moved debug() after var
	  settings. 

	* src/ffx/ffxrmail.pl: if the From_ line does not contain an
	  envelope sender, set to news@localhost.

	* doc/fidogate.texi (ftnpack): added -F --file-dir option.

	======================================================================

	* Started new ChangeLog after release of 4.1.0, old ChangeLog
	  renamed to ChangeLog.O.
