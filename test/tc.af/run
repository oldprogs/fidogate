#!/bin/sh

../tr.init

T="../../src/areafix/ftnaf -vvv -cconfig"

echo "tc: running"

# command line
echo "----- Testing command line -----"

$T -b areas.bbs -- 2:2452/110.90 query
$T -b areas.bbs -- 2:2452/110.90 list
$T -b areas.bbs -- 2:2452/110.90 listall

cp areas.bbs tmp_areas.bbs

$T -b tmp_areas.bbs -- 2:2452/110.1 add linux.ger
$T -b tmp_areas.bbs -- 2:2452/110.1 add tolkien.ger
$T -b tmp_areas.bbs -- 2:2452/110.1 add xx
$T -b tmp_areas.bbs -- 2:2452/110.1 add yy
$T -b tmp_areas.bbs -- 99:2452/110.1 add zz

$T -b tmp_areas.bbs -- 2:2452/110.1 add UNKNOWN.GER
#$T -b tmp_areas.bbs -x./unknown 2:2452/110.1 add UNKNOWN.GER

$T -b tmp_areas.bbs -- 2:99/99 del test1
$T -b tmp_areas.bbs -- 2:99/99 del test2
$T -b tmp_areas.bbs -- 2:99/99 del test2

$T -b tmp_areas.bbs -- 2:99/99 create LINUX.GER
$T -b tmp_areas.bbs -- 2:99/99 create LINUX.GER -#
$T -b tmp_areas.bbs -- 2:99/99 create AREA.NEW -d New-Test-Area
$T -b tmp_areas.bbs -- 2:99/99 create AREA.NEW -#
$T -b tmp_areas.bbs -- 2:99/99 create AREA.NEW1 -p -r
$T -b tmp_areas.bbs -- 2:99/99 create AREA.NEWER -p -l 10
$T -b tmp_areas.bbs -- 2:99/99 create AREA.NEWEST -l 5 -k abcxyz

echo " "

# mail interface
echo "----- Testing mail interface -----"

$T -m -n -b tmp_areas.bbs <<EOF
From: Sysop@f5678.n1234.z2.fidonet.org
Subject: WUSEL

add *.GER
add TEST1
add TEST2
list
query
unlinked
create NEW
EOF

$T -m -n -b tmp_areas.bbs <<EOF
From: Sysop@test.fidonet.org
X-FTN-From: Sysop Mueller @ 2:1234/5678
Subject: WUSEL

vacation *.ger
-TEST1
-TEST2
EOF

$T -m -n -b tmp_areas.bbs <<EOF
From: mj@fido.de
Subject: Areafix request

add *.GER
EOF

$T -m -n -b tmp_areas.bbs <<EOF
From: mj@fido.de
Subject: Areafix request

password 2:1234/5678 WUSEL
add *.GER
list
EOF

# No mailer, stdout
$T -m -r -n -b tmp_areas.bbs <<EOF
From: mj@fido.de
Subject: Areafix request

help
EOF
