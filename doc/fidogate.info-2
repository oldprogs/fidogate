This is Info file fidogate.info, produced by Makeinfo version 1.67 from
the input file fidogate.texi.

   This file documents the usage of FIDOGATE version 4

   Copyright (C) 1994-1996, Martin Junius

   Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

   Permission is granted to copy and distribute modified versions of
this manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

   Permission is granted to copy and distribute translations of this
manual into other languages, under the above conditions for modified
versions.


File: fidogate.info,  Node: Config,  Next: Hosts,  Prev: Config files,  Up: Config files

`config.*' Configuration Files
==============================

FIDOGATE uses different config files:

`config.common'
     Common settings.

`config.gate'
     The config file for the gateway related programs `ftn2rfc',
     `ftnin', `ftninpost', `ftninrecomb', `rfc2ftn'.

`config.main'
     The config file for the tosser related programs `ftn2ftn',
     `ftnaf', `ftnbounce', `ftnbsy', `ftnconfig', `ftnhatch',
     `ftnlock', `ftnlog', `ftnpack', `ftnroute', `ftnseq', `ftntick',
     `ftntoss', `ftnfattach'.

`config.ffx'
     The config file for the ffx programs `ffx', `ffxbatch', `ffxqt'

   The format of these files is

     keyword [ arg ... ]

   Keywords and arguments may be quoted in `""', keywords are
case-insensitive.

Common configuration:

`include file'
     Include another config file, may be nested.

`Address node'
     Your FTN address (Z:N/F.P). There may be up to 32 `Address'
     statements (`MAXADDRESS' from `config.h').

`Uplink node'
     The FTN address of your uplink, must be in the same order as the
     corresponding `Address' statements. There may be up to 32 `Uplink'
     statements.

`LibDir directory'
     The FIDOGATE lib directory (default specified in `config.make').

`SpoolDir directory'
     The FIDOGATE spool directory (default specified in `config.make').

`LogDir directory'
     The FIDOGATE log file directory (default specified in
     `config.make').

`Outbound directory'
     The BinkleyTerm-style outbound base directory, without the
     `out.'nnn zone directory.

`Inbound directory'
     The BinkleyTerm-style inbound directory.

`PInbound directory'
     The BinkleyTerm-style protected inbound directory (default is the
     directory specified by `Inbound').

`UUInbound directory'
     The BinkleyTerm-style inbound directory for UUENCODEd packets.

`Hostname name'
     The host name part of your Internet address.

`Domain name'
     The domain part of your Internet address.

`HostsDomain name'
     The domain used for entries in the `hosts' config file. Default is
     the same as `Domain'.

`Origin text'
     FTN default EchoMail origin line, the text used for the origins
     line generated by `rfc2ftn'. Quote text in `""' if it contains
     spaces. Individual origin lines may be specified in the `areas'
     file using the `-o' option.

`Organization text'
     Organization header for mail and news generated by `ftn2rfc'.
     Quote text in `""' if it contains spaces.

`Zone zone domain ftndomain out'
     Specifies Internet domain domain, FTN domain ftndomain, and
     outbound directory out (relative to `Outbound') for the FTN zone
     zone. zone may be `default', then this is the default entry for
     not explicitely specified zones. Up to 32 `Zone' entries may be
     specified (`MAXADDRESS' from `config.h').

`DosDrive drive directory'
     OPTIONAL: specify translation of a DOS drive (e.g. `H:') to a
     directory. This is useful, if you keep your outbound on a UNIX
     server and run BinkleyTerm on a DOS client. If one or more
     `DosDrive' statements are specified, FIDOGATE will automatically
     translate file attaches to the file names seen by the DOS client.
     Up to 16 `DosDrive' entries may be specified (`MAXDOSDRIVE' from
     `config.h').

`AreasXlate area-chars newsgroup-chars'
     Automatic translation (-H option in `areas' file) of characters for
     Fido area <-> Internet newsgroup name conversion.

`Aliases file'
     Use file instead of the default `aliases' config file.

`Areas file'
     Use file instead of the default `areas' config file.

`Hosts file'
     Use file instead of the default `hosts' config file.

`Passwd file'
     Use file instead of the default `passwd' config file.

`Packing file'
     Use file instead of the default `packing' config file.

`Routing file'
     Use file instead of the default `routing' config file.

`History file'
     Use file instead of the default `history' database.

Special configuration `ffx' (config file `config.ffx'):

`FFXDataFlav flavour'
     Flavour to be used for file attachments created by the `ffx'
     program.

`FFXDataCompr command ...'
     Program to be used for creating compressed `ffx' data files.

`FFXDataExt parameter'
     File name extension to be used for compressed `ffx' data files.

`FFXDataDecompr parameter'
     Uncompressor name for compressed `ffx' data files (will be run by
     `ffxqt').

`FFXDataComprN parameter'
     Program to be used for creating uncompress `ffx' data files (option
     `-n').

`FFXDataExtN parameter'
     File name extension to be used for uncompressed `ffx' data files
     (option `-n').

`FFXDataDecomprN parameter'
     Uncompressor name for uncompressed `ffx' data files (option `-n',
     will be run by `ffxqt').

     Special configuration `ffx' (config file `config.ffx'):

Special configuration `ffxbatch' (config file `config.ffx'):

`FFXBatchArc command ...'
     Command for creating archive of batched `ffx' files.

`FFXBatchArcV command ...'
     Command for creating archive of batched `ffx' files if option `-v'
     is given.

`FFXBatchArcExt parameter'
     File name extension for archive.

`FFXBatchArcCmd parameter'
     Command name for unbatching archive by `ffxqt'.

`FFXDataFlav parameter'
     Flavour to be used for file attachments created by the `ffxqt'
     program.

Special configuration `ffxqt' (config file `config.ffx'):

`FFXCommand name command ...'
     List of command names and corresponding commands to be used by
     `ffxqt'. Only the commands listed can be executed. This replaces
     the old LIBDIR/ffxqt-dir/name structure of previous FIDOGATE
     versions.

`FFXUncompress name command ...'
     List of uncompressor names and corresponding commands to be used by
     `ffxqt'.

Special configuration `ftn2rfc' (config file `config.gate'):

`DotNames'
     Generate User.Name@host.do.main instead of User_Name@host.do.main.
     `rfc2ftn' recognizes both address types.

`X-FTN header'
     Include the various X-FTN header in the output of `ftn2rfc':
    `f'
          `X-FTN-From'

    `t'
          `X-FTN-To'

    `T'
          `X-FTN-Tearline'

    `O'
          `X-FTN-Origin'

    `V'
          `X-FTN-Via'

    `D'
          `X-FTN-Domain'

    `S'
          `X-FTN-Seen-By'

    `P'
          `X-FTN-Path' `X-FTN-From' is required for the proper
     operation of `ftnaf'.

`BounceCCMail user@do.main'
     Send CC of bounced messages to this address.

`TrackerMail user@do.main'
     Forward mail from message trackers to this address.

`KillUnknownMSGIDZone'
     Kill messages that contain a `^AMSGID' from an unknown zone (not
     listed in `Zone' statements).

`KillNoMSGID'
     Kill messages that don't contain a `^AMSGID' kludge.

`KillSplit'
     Kill messages that contain a `^ASPLIT' kludge.

`UseOriginForOrganization'
     Put the text from the * Origin line (excluding the (z:n/f.p)
     address) into the Organization header.

`UseFTNToAddress'
     Use FTN to address for mail addressed to the gateway without a To
     line, e.g. mail to
          Max Mueller  2:2452/110.2
     with a HOSTS entry
          2:2452/110.2  orodruin-ftn.fido.de
     is converted to
          To: Max_Mueller@orodruin-ftn.fido.de
     Without this option the standard local HOST.DOMAIN is used, e.g.
          To: Max_Mueller@orodruin.fido.de

`HostsRestricted'
     Restrict usage of the gateway to FTN addresses listed in `hosts'.

`FTNJunkGroup name'
     name of the FTN junk newsgroup (newsgroup for unknown FTN areas).

`ErrorsTo user@do.main'
     Insert additional Errors-To header into Internet mails, sending
     bounced mails from gateway users to user@do.main.

`NoAddressInToField'
     Do not allow `@ ! %' chars in the FTN to field, thus preventing
     users from putting Internet addresses in the to field.

`NetMail8bit'
     Use the ISO-8859-1 MIME 8BIT character set when gating Fido
     NetMail.

`NetMailQuotedPrintable'
`NetMailQP'
     Use the ISO-8859-1 MIME QUOTED-PRINTABLE character set when gating
     Fido NetMail. `NetMailQuotedPrintable' overrides `NetMail8bit' if
     both are specified.

`SingleArticles'
     Write single articles to output files (in `tmpnews'), not news
     batches containing several articles (batch is default).

`RFCAddrMode mode'
     Mode for RFC address generated by FIDOGATE:
    `()  p  0'
          user@do.main (Real Name)-type addresses

    `<>  a  1'
          Real Name <user@do.main>-type addresses

Special configuration `ftninpost' (config file `config.gate'):

`FTNInSendmail command ...'
     Sendmail program to be run by `ftninpost' with options. The option
     `-fsender' will be automatically added by `ftninpost'. For
     compatibility with old FIDOGATE configurations, any `-f%s' option
     will be removed.

`FTNInRnews command ...'
     Rnews program to be run by `ftninpost'.

`FTNInRecombine'
     Automatically run `ftninrecomb' to recombine split messages.

Special configuration `rfc2ftn' (config file `config.gate'):

`Gateway node'
     Specifies an FTN-Internet gateway for routing Internet mail to. If
     enabled, FIDOGATE can be used as the default delivery agent for all
     Internet mail.

`NoFromLine'
     Don't generate `From:' header and FSC-0035 kludges. Must be set for
     a non-gateway, point FIDOGATE configuration.

`NoFSC0035'
     Don't generate FSC-0035 `^AREPLYADDR', `^AREPLYTO'.

`NoFSC0047'
     Don't generate FSC-0047 `^ASPLIT', use old ` * Large message split
     by ' ... text line.

`MaxMsgSize bytes'
     Maximum size of FTN messages (default value), larger messages will
     be split.

`LimitMsgSize bytes'
     Maximum limit for messages (default value), larger messages will be
     bounced (mail) and simply not gated (news).

`MausDomain .do.main'
`MausGate address'
     Enables and sets the processing of addresses for the German MAUS
     network, replacing the old `maus' config file. `MausDomain' sets
     the Internet domain of MAUS addresses, `MausGate' the address of
     the Fido-MAUS gateway.

     If set, User_Name@xy.maus.domain will be converted to User Name %
     XY for the Fido-MAUS gateway.

`EchoMail4D'
     Generate 4D EchoMail control lines, when the gateway operates at a
     point address. This is required when using the gateway and the
     tosser for a Fido point!

`HostsRestricted'
     Restrict usage of gateway to FTN addresses listed in `hosts'.

`RFCLevel n'
     Set the default RFC level. See also `-R' option in `areas'.

`UseOrganizationForOrigin'
     Put the text from the Organization header into the * Origin line.

`XFlagsPolicy'
     Controls policy for X-Flags processing (default is 0, no
     processing):
    `n   N   0'
          No X-Flags processing at all.

    `s   S   1'
          X-Flags processing for local sender (check From and Received
          headers). This is not really secure!!! If your system is
          directly connected to the Internet and runs an SMTP daemon
          such as sendmail, mail can easily be faked to look like
          local!!!

    `a   A   2'
          X-Flags processing for all. Totally open, totally insecure!!!

`DontUseReplyTo'
     Don't try to get real name from Reply-To header. Particularly
     useful for mailing lists which set the Reply-To header to the
     mailing list.

`RFCAddrMode mode'
     Mode for RFC address generated by FIDOGATE:
    `()  p  0'
          user@do.main (Real Name)-type addresses

    `<>  a  1'
          Real Name <user@do.main>-type addresses

`ReplyAddrIfMailTX'
     Force `^AREPLYADDR' (if `FSC0035' is enabled) to only contains
     `^AREPLYADDR <user@do.main>' for compatibility with ifmail-TX.

Special configuration `ftnhatch' (config file `config.main'):

`TickFlav flavour'
     Flavour of file attaches generated by `ftnhatch'.

Special configuration `ftntick' (config file `config.main'):

`TickFlav flavour'
     Flavour of file attaches generated by `ftntick'.

`TickReplacedDir directory'
     Directory for old files replaced by `ftntick'.

`UnknownTickArea area'
     File area to be used to TIC files with an unknown area. Incoming
     files with an unknown area will be moved to this unknown area's
     directory.

Special configuration `ftnaf' (config file `config.main'):

`AreasBBS name'
     Specifies the `areas.bbs' EchoMail distribution file used by
     `ftnaf' and `ftntoss'.

`FAreasBBS name'
     Specifies the `fareas.bbs' file echo distribution file used by
     `ftnaf -F' and `ftnhatch'/ `ftntick'.

`CCMail user@do.main'
     Send CC of `ftnaf''s replies to this address.

Special configuration `ftnexpire' (config file `config.main'):

`MaxHistory days'
     Maximum length of history database. Keep entries for days days.

Special configuration `ftnpack' (config file `config.main'):

`MaxArc Kbyte'
     Maximum size of ArcMail archives created by `ftnpack'. See also
     `-m' option.

Special configuration `ftnroute' (config file `config.main'):

`MaxOpenFiles n'
     Set maximum number of concurrently open packet files to n.
     Default: 10 (`MAXOPENFILES' from `config.h'), see also `-M' option.

Special configuration `ftntoss' (config file `config.main'):

`AddToSeenBy area nodes'
     Add the listed nodes to the SEEN-BYs for EchoMail tossed in area.
     area may be specified using shell-style wildcards `*?[a-z]'.

`ZoneGate node seenby'
     Zone gate operation: strip SEEN-BYs for EchoMail addressed to node
     and replace with listed seenby nodes. seenby must include both the
     link's and our address. Example:

          ZoneGate  1:105/42  105/42 2452/110

`KillEmpty'
`KillBlank'
     Kill empty (blank) messages addressed to one of our AKAs. These are
     typically file attach and file request messages.

`KillUnknown'
     Kill messages for unknown EchoMail areas (not listed in areas.bbs).

`KillRouted'
     Kill routed EchoMail messages (not addressed to one of our AKAs).

`KillInsecure'
     Kill insecure EchoMail messages (sender not listed in `areas.bbs').

`KillCircular'
     Kill EchoMail with circular path (own address already in `^APATH').

`LogNetMail'
`Track'
     Log all NetMail messages in log file.

`CheckPath'
     Enable EchoMail circular path check (see `KillCircular').

`DupeCheck'
     Enable dupe check (using SPOOLDIR`/history' database).

`KillNoMSGID'
     Kill EchoMail messages without a `^AMSGID', i.e. treat as dupes.

`KillDupe'
`KillDupes'
     Kill duplicate EchoMail messages if `DupeCheck' is enabled.

`KillOld'
     Kill messages with date < now - `MaxHistory', i.e. treat as dupes.

`MaxMsg n'
     Set maximum number of messages in output files to n, restricting
     the maximum size of packets. See also `-m' option.

`MaxOpenFiles n'
     Set maximum number of concurrently open packet files to n.
     Default: 10 (`MAXOPENFILES' from `config.h'), see also `-M' option.

`AreasBBS name'
     Specifies the `areas.bbs' EchoMail distribution file used by
     `ftnaf' and `ftntoss'.

`MaxHistory days'
     Maximum length of history database. Keep entries for days days.
     Messages with date < now - `MaxHistory' are considered old.

`EchoMail4D'
     Generate 4D EchoMail control lines, i.e. SEEN-BY and PATH will
     include point addresses.

`NoEmptyPath'
     Do not generate an empty PATH line.

Special configuration `runtoss' (config file `config.main'):

`MinDiskFree Kbyte'
     Minimum free disk space required by the `runtoss' script.
     `runtoss' will terminate if there is less than Kbyte free disk
     space in SPOOLDIR.

Special configuration `ftnfattach' (config file `config.main'):

`FAttachFlav flavour'
     Default flavour for file attaches created by `ftnfattach'.


File: fidogate.info,  Node: Hosts,  Next: Aliases,  Prev: Config,  Up: Config files

`hosts' FTN Address to Host Name Conversion
===========================================

This file contains the FTN addresses and host names for registered FTN
nodes. If `HostsRestricted' is defined in `config.gate', this file
controls the access to the gateway.

The format of this file is

     node  hostname  [ options ]

Fields:

node
     FTN address. An address for a node will match all points of this
     node, see example below.

hostname
     Host name, one of

    local host name
          A name without a trailing `.' is a hostname in the local
          domain (specified by `HostsDomain' or default `Domain' in
          `config').

    fully qualified domain name
          A name with a trailing `.' is a fully qualified domain name
          for this node.

    `-'
          A `-' specifies a listed node, but without a host name
          translation, using the standard p.f.n.z address.

options
    `-p'
          Generate addresses with point part, e.g. `p99.hippo.fido.de'.
          Default is omitting the point part.

    `-d'
          Mark the node as down, mail to this address will be bounced
          with an appropiate error message.

   The `hosts' file is read into memory during startup of FIDOGATE.
The first entry found matches, so a host name for a point must be
specified before the boss node, if there are entries for both.

   Example:

`config':

     HostsDomain   .Fido.DE

`hosts':

     2:2452/110    hippo
     2:2452/990    test     -p
     2:2452/991    test.wusel.org.
     2:2452/999    -

Resulting data base read into memory:

     Node:     2:2452/110.0
     Hostname: hippo.Fido.DE
     Flags:
     
     Node:     2:2452/990.0
     Hostname: test.Fido.DE
     Flags:    POINT
     
     Node:     2:2452/991.0
     Hostname: test.wusel.org
     Flags:
     
     Node:     2:2452/999.0
     Hostname:
     Flags:

This results in the following conversion of addresses from FTN to
Internet:

     2:2452/110     ->  hippo.Fido.DE
     2:2452/110.99  ->  hippo.Fido.DE
     2:2452/990.99  ->  p99.test.Fido.DE
     2:2452/991.1   ->  test.wusel.org
     2:2452/999.2   ->  p2.f999.n2452.z2.Fido.DE


File: fidogate.info,  Node: Aliases,  Next: Areas,  Prev: Hosts,  Up: Config files

`aliases' User Aliases
======================

This file contains user aliases, the FTN address, and the full name of
the user.

The format of this file is

     alias  node  "full name"

Fields:

alias
     Alias for the user.

node
     FTN address of the user.

full name
     Full name of the user.

   The FTN address node may be a point address. In this case mail
addressed to the user at the boss node address will be readdressed to
this point, see example below.

   Example:

`aliases':

     mvr         2:2452/110.6    "Marc van.Rey"

   Using the definitions from the section on `hosts', this results in
the following address conversion:

     Marc van.Rey @ 2:2452/110.6  <->  mvr@hippo.Fido.DE


File: fidogate.info,  Node: Areas,  Next: Bounce,  Prev: Aliases,  Up: Config files

`areas' FTN Area to Newsgroup Conversion
========================================

This file contains FTN areas with corresponding newsgroups and options.

The format of this file is

     area  newsgroup  [ options ]

Fields:

area
     FTN area.

newsgroup
     Usenet newsgroup.

options
     IMPORTANT: there must be spaces between the option and its
     argument!

    `-a address'
          Select alternate FTN address for this area/newsgroup.

    `-z zone'
          Select zone AKA zone for this area/newsgroup.

    `-d distribution'
          Use Usenet `distribution' for this newsgroup when gating from
          FTN to Internet.

    `-o "origin"'
          Use an alternate origin line for this area when gating from
          Internet to FTN.  (Default specified in `config'.)

    `-g'
          Don't send messages from another SomeNet-FTN gateway across
          the gateway.

    `-l'
          Only local crosspostings are allowed in this newsgroup/area.

    `-x'
          No crosspostings are allowed in this newsgroup/area.

    `-8'
          Use the ISO-8859-1 MIME 8BIT character set when gating to this
          newsgroup.

    `-Q'
          Use the ISO-8859-1 MIME quoted-printable character set when
          gating to this newsgroup.

    `-H'
          Area/newsgroup matches entire hierarchy. Names are converted
          automatically, using upper case for area names and lower case
          for newsgroups.

          Example:
               GNU.    gnu.    -z 242  -H
          `gnu.announce' will be converted to `GNU.ANNOUNCE',
          `gnu.bug.gcc' to `GNU.BUG.GCC', similar for all other.

    `-!'
          Don't gate this area/newsgroup or hierarchy (if combined with
          `-H'). Usefull to exclude certain newsgroups from a hierarchy
          for gating.

          Example:
               ALT.BINARIES.    alt.binaries.    -z 242  -H -!
               ALT.             alt.             -z 242  -H
          This is roughly equivalent to INN's `alt.*,!alt.binaries.*'.
          Please note that the first `areas' entry matches, so any `-!'
          must be placed before the `-H' hierarchy definition.

    `-R level'
          Select level of `^ARFC-'Header put into FIDO messages for this
          area. Level:
         0
               No `^ARFC-'header at all.

         1
               Only important `^ARFC-'header.

         2
               All `^ARFC-'header.

    `-m bytes'
          Sets `MaxMsgSize' for this area (0 = no limit).

    `-M bytes'
          Sets `LimitMsgSize' for this area (0 = no limit).

    `-X "RFC-Header: text"'
          Add extra RFC header to output of `ftn2rfc'. Multiple `-X'
          options are possible.

   Only newsgroups listed in this file will be gated from Internet to
FTN.  FTN area not listed in this file will be gated into the
`FTNJunkGroup' newsgroup specified in `config.gate'.


File: fidogate.info,  Node: Bounce,  Next: Passwd,  Prev: Areas,  Up: Config files

Bounce Messages of `ftn2rfc'
============================

`ftn2rfc' uses the following files for messages sent to the FTN user
when bouncing mail for some reason:

`bounce.noto'
     Message addressed to user `UUCP' or `GATEWAY' without a `To' line
     at the very beginning of the message.

`bounce.down'
     Message addressed from/to node currently marked as down in `hosts'
     (`-d' flag).

`bounce.restricted'
     Messages from nodes not listed in `hosts', gateway running in
     restricted mode.

`bounce.insecure'
     Messages came via an insecure (i.e. not password protected) link
     and contain a `To' line. This requires the `-t' option to
     `ftn2rfc'.

   Within a bounce message, the following substitutions can be used:

`%F'
     FTN address of message sender.

`%T'
     FTN address of message recipient (the gateway, that is).

`%O'
     FTN address of message origin.

`%d'
     Date/time of message.

`%t'
     Name of message recipient.

`%f'
     Name of message sender.

`%s'
     Message subject.

`%R'
     `To' line, Internet address.

`%M'
     The entire message body.


File: fidogate.info,  Node: Passwd,  Next: Routing,  Prev: Bounce,  Up: Config files

`passwd' Password Config File
=============================

This file contains passwords used by `ftnaf', `ffx', and the tosser
programs.

The format of this file is:

     context  node  password  options

Contexts:

`packet'
     FTN packet passwords, checked by `ftntoss', inserted by all
     FIDOGATE programs which create FTN packets. Password checking for
     incoming packets is NOT YET IMPLEMENTED.

`af'
     Areafix passwords for requests to `ftnaf'.

`ff'
     Filefix passwords for requests to `ftnaf -F'.

`ffx'
     `ffx' command passwords, checked by `ffxqt', inserted by `ffx'
     into the `.ffx' command files.

   Optional stuff (options) is used for `ftnaf' permission settings:

     lvl  key  "Sysop Name"

   lvl is the access level, which must be greater or equal than the one
in `areas.bbs'. key is the access key, which must be a super set of the
one in `areas.bbs'.

   Example:

     packet      2:1234/5678     WUERG
     ffx         242:1111/99     BLAHBLUB
     af          2:1234/5678     WUSEL       1   F     "Test Sysop"
     ff          242:1234/5678   WUSEL       4   UQ    "Yet Another Sysop"


File: fidogate.info,  Node: Routing,  Next: Packing,  Prev: Passwd,  Up: Config files

`routing' Config File
=====================

This file contains the routing commands performed by `ftntoss'
(commands `remap' and `rewrite') and `ftnroute' (everything else). The
first routing command found matches.

   The syntax of the `routing' commands is very similar to the routing
file used by the well-known FIDO tossers QMail and SQUISH.

The format of this file is:

     remap      src-node  dest-node  name
     remapto    src-node  dest-node  name
     remapfrom  src-node  dest-node  name
     rewrite    src-node  dest-node
     
     echomail
     netmail
     
     send       flavor    nodes
     route      flavor    dest-node nodes
     hostroute  flavor    nodes
     hubroute   flavor    nodes
     xroute     flavor    dest-node from-node to-node
     bossroute  flavor    nodes
     
     change     old-flavor  new-flavor  nodes
     
     sendmove   flavor    nodes

Commands:

`remap'
`remapto'
     Remaps NetMail addressed to name at src-node to the new address
     dest-node. Most usefull for remapping to points based on their
     name.  name supports shell-style wildcard patterns. Remapping to
     0:0/0.0 means killing the message.

`remapfrom'
     Remaps NetMail from name at src-node to the new address dest-node.
     name supports shell-style wildcard patterns. Remapping to 0:0/0.0
     means killing the message.

`rewrite'
     Rewrites NetMail from and to addresses. A node address matching
     src-node will be changed to dest-node.

`echomail'
     Starts routing commands for EchoMail.

`netmail'
     Starts routing commands for NetMail.

`allmail'
     Starts routing commands for both EchoMail and NetMail. NOT YET
     IMPLEMENTED.

`send'
     Send normal mail addressed to nodes with flavor.

     WARNING: e.g. `send hold 2:2452/110' actually is the same as
     `route hold 2:2452/110.0 2452/110.*'. So `send hold 2:2452/110
     110.*' will not have the desired effect, use `send hold
     2:2452/110.*' only instead!!!

`route'
     Route normal mail addressed to nodes via dest-node, using flavor.

`hostroute'
     Route normal mail addressed to nodes via their host (i.e. Z:N/0),
     using flavor.

`hubroute'
     Route normal mail addressed to nodes via their hub, using flavor.
     NOT YET IMPLEMENTED.

`xroute'
     Route normal mail from from-node to to-node via dest-node, using
     flavor. NOT YET IMPLEMENTED.

`bossroute'
     Route flavor mail addressed to nodes via their boss node, not
     changing the flavor.

`change'
     Change flavor of mail packet from old-flavor to new-flavor.

`sendmove'
     Like `send', but `ftnroute' doesn't copy the mail packets, they
     are moved instead. This requires that SPOOLDIR/toss/tmp and
     SPOOLDIR/toss/out are on the same file system/disk drive.

   Node addresses nodes, src-node, dest-node support wildcards using
`*' and `all', which can be used for the zone, net, node, and point
component of an address. `*' alone matches all addresses. `rewrite'
wildcards in the destination address are replaced with the
corresponding component of the source address.

The outbound flavor string flavor can be any of `normal', `hold',
`crash', `direct', `out', `hut', `cut', `dut'.

   Example:

     Remap     2:2452/110.0 2:2452/110.7  "Martin Koser"
     Rewrite   242:241/*    2:241/*
     
     NetMail
     send      hold         242:1000/1.all
     change    crash  hold  242:1000/1.all 2.all
     send      hold         242:1000/3
     route     hold         242:1000/50 51 52 53 54 55 56 57 58 59


File: fidogate.info,  Node: Packing,  Next: Areas.bbs,  Prev: Routing,  Up: Config files

`packing' Config File
=====================

This file contains the packer (archiver) definitions and packing
commands for `ftnpack'.

The format of this file is:

     arc        name  `"'archiver`"'
     prog       name  `"'program`"'
     
     pack       name  nodes
     rpack      name  dest-node  nodes
     fpack      name  dest-node  nodes
     dirpack    dir  name  nodes

Packer/program definitions:

`arc'
     Defines the archiver name as program archiver. The archiver string
     must contain two `%s', the first one is replaced with the archive
     name, the second one with the packet name.

`prog'
     Defines the program name as program. The program string must
     contain a `%s', which is replaced with the name of the packet to be
     processed.

Packing definitions:

`pack'
     Pack all mail addressed to nodes using the archiver defined as
     name. The archiver name `noarc' indicates that the mail packet
     should not be packed, but copied to the OUT file of the node.

`rpack'
     Same as `pack', but pack all mail addressed to nodes to the
     archive for dest-node.

`fpack'
     Similar to `rpack', but the packet is archived for the normal
     arcmail packet for each node. This archive is then attached to the
     FLO file of dest-node.

`dirpack'
     Archive packets for nodes in special directory dir, not the
     standard outbound.

   Example:

     arc     zip     "/usr/local/bin/zip -gkj %s %s"
     
     rpack   zip     2:242/41 2:242/42 242:2000/* 254:*/*
     pack    noarc   2:2452/110.1 242:4900/99 254:2410/6.1
     pack    zip     *


File: fidogate.info,  Node: Areas.bbs,  Next: Basic,  Prev: Packing,  Up: Config files

`areas.bbs' EchoMail Distribution
=================================

This file contains the EchoMail areas and linked nodes. The file
`fareas.bbs' is used for file echos.

   The format of this file is as follows, the first line being ignored
for compatibility with the standard DOS AREAS.BBS. Individual fields
can be enclosed in "..." to allow spaces, in particular for the area
description.

     [#]directory  area  [options]  nodes

#
     Marks area as pass-through, i.e. no packets for the own address
     (zone AKA or set by `-a') will be created.

directory
     The directory where the message base/file base for this area is
     located.  Currently FIDOGATE uses the directory for file areas
     only.

area
     The area name.

options
     Options for this area:
    `-a address'
          Set alternate FTN AKA for this area.

    `-z zone'
          Set alternate zone AKA for  this area. If not  set, the zone
          information is taken from  the first node in the  nodes list.
          `ftnaf' will automatically rewrite `areas.bbs', inserting
          the `-z' option.

    `-l lvl'
          Set Areafix/Filefix access level for this area.

    `-k key'
          Set Areafix/Filefix access key for this area.

    `-d "description"'
          Description for this area. Enclose in `"..."' to allow spaces
          in description text.

    `-#'
          Set pass-through flag for this area (same as directory
          starting with `#').

    `-r'
          Set read-only flag for this area. New downlink will have a
          read-only status. NOT YET IMPLEMENTED.

nodes
     The list of downlink nodes. This is a sorted short list of nodes
     as in FIDO EchoMail SEEN-BYs and PATH. The first node in nodes
     stays at this place, though. Do not put your own address into the
     nodes list.


File: fidogate.info,  Node: Basic,  Next: Sendmail,  Prev: Areas.bbs,  Up: Top

Basic Configuration
*******************

   There seems to be some confusion about how to configure the mail/news
system, the gateway, and the tosser, so I added this chapter. Hopefully
this will help ...

* Menu:

* Sendmail::	       Sendmail configuration
* Example Point::      Example point configuration
* Example Point 2::    Example configuration with 2 point addresses
* Example Node::       Example leaf node configuration


File: fidogate.info,  Node: Sendmail,  Next: Example Point,  Prev: Basic,  Up: Basic

Sendmail Configuration
======================

This section describes the FIDOGATE additions to the sendmail V8 m4
configuration.

   FIDOGATE adds two new mailer files, `ftn.m4' and `ffx.m4'. Use
`MAILER(ftn)' and/or `Mailer(ffx)' to include these mailer definitions.

   Please note that the new FIDOGATE mailers are based on the SMTP
mailer sender/recipient rewrite rules, so including `MAILER(smtp)' is
mandatory!

FIDOGATE ftn mailers (using the `rfc2ftn' gateway program):

`ftn'
     Mailer for sending to systems registered in the `hosts' config
     file. `ftn' will bounce mails if the receiving hosts is not
     registered or marked as down.

`ftni'
     Mailer for sending to a typical p.f.n.z domain, e.g.
     `.fidonet.org'. `ftni' will send the mail to any system,
     regardless of the registration in `hosts'.

`ftna'
     Like `ftni', but the `ftna' mailer also sets the address and
     uplink of the gateway to the relay host passed to this mailer.

`ftno'
     Like `ftna'. In addition, this mailer sets the directory for
     packets created by `rfc2ftn' to SPOOLDIR/out/relayhost.

FIDOGATE ffx mailer (using the `ffxmail' utitility):

`ffx'
     Mailer for sending via the FIDOGATE ffx sub-system.


File: fidogate.info,  Node: Example Point,  Next: Example Point 2,  Prev: Sendmail,  Up: Basic

Example Point Configuration
===========================

Please note that this point configuration uses the FIDOGATE tosser.
Thus, it's different from the point configuration described in Roland
Rosenfeld's Point HOWTO!!!

   Actually, this point configuration is very similar to the node
configuration described in the next section.

   Let's assume the following addresses:

   Fido point address 2:2499/123.9

   Uplink (NetMail and EchoMail) 2:2499/123

Address configuration `config.gate' (uplink is the same as the point
address!), `EchoMail4D' is stricly reqired:

     Address 2:2499/123.9
     Uplink  2:2499/123.9
     
     EchoMail4D

Address configuration `config.main' (no uplink here!):

     Address 2:2499/123.9

Routing configuration `routing': mail for the local address on hold,
everything else is send to the boss node.

     NetMail
     route    hold   2:2499/123.9
     route    normal 2:2499/123 1:* 2:* 3:* 4:* 5:* 6:*
     
     EchoMail
     sendmove hold   2:2499/123.9
     sendmove normal *

Packer configuration `packing': no packing (noarc, this is very
important) for own address, `zip' is the default archiver for
everything else.

     arc  zip    "/usr/bin/zip -9gkjq %s %s"
     
     pack noarc  2:2499/123.9
     pack zip    *

Next, the EchoMail areas must be listed in the `areas.bbs' file. Do not
put your point address into `areas.bbs'! Example with two areas (the
directory `X' is not used for EchoMail areas), which must be
non-passthrough:

     Your system name!sysop name
     X LINUX.GER 2:2499/123
     X UNIX.GER  2:2499/123

   In the gateway configuration, these areas must be listed in the
`areas' config file:

     LINUX.GER fido.ger.linux
     UNIX.GER  fido.ger.unix

   Now the gateway is able to process EchoMail. The program `ftnin'
should be run to gate any (unpacked) FTN outbound mail packet for
2:2499/123.9. The script `scripts/run/runpoll' runs everything needed
for a point polling its mail at the boss node.


File: fidogate.info,  Node: Example Point 2,  Next: Example Node,  Prev: Example Point,  Up: Basic

Example Configuration with 2 Point Addresses
============================================

This section describes a point setup with 2 different point addresses
and 2 different boss nodes (uplinks). Thanks to Stephan Zellerhoff
<stephan@poi.westfalen.de> for contributing some stuff.

   Let's assume the following addresses:

   Primary point address 2:2499/123.10, boss node 2:2499/123

   Secondary point address 2:2498/120.2, boss node 2:2498/120

Setup with FIDOGATE:

Addresses
     Put the following address statements in `config.gate'
          Address 2:2499/123.10
          Address 2:2498/120.2
          Uplink  2:2499/123.10
          Uplink  2:2498/120.2
     and `config.main'
          Address 2:2499/123.10
          Address 2:2498/120.2
     Please note that the primary point address must be the first entry!

Sendmail
     Use the sendmail `mailertable' feature and create the following
     entries for routing Fidonet mail:
          # Mail to 2:2498/*, secondary address
          .n2498.z2.fidonet.org    ftna:p2.f120.n2498.z2.fidonet.org
          # Everything else 2:*/*, primary address
          .z2.fidonet.org          ftna:p10.f123.n2499.z2.fidonet.org
     Please note that in this setup, the relay host specified with the
     `ftna' mailer is your own address, not your boss node!!!

Areas
     Areas send to the primary boss don't require anything special in
     the `areas' config file, areas send to the secondary boss must
     have the `-a 2:2498/120.2' option, e.g.
          LINUX.GER    fido.ger.linux    -a 2:2498/120.2

Areas.BBS
     Likewise, areas send to the secondary boss must have the `-a
     2:2498/120.2' option in `areas.bbs' and the secondary boss as the
     uplink, e.g.
          X LINUX.GER    -a 2:2498/120.2    2:2498/120

Routing
     The netmail routing must be adapted to send mail to the secondary
     boss, e.g. everything for net 2498:
          route    normal   2:2498/120 2:2498/*.*
          route    normal   2:2499/123 2:*

Packing
     Packer configuration `packing': no packing (noarc, this is very
     important) for all of our own addressess, `zip' is the default
     archiver for everything else.

          arc  zip    "/usr/bin/zip -9gkjq %s %s"
          
          pack noarc  2:2499/123.10 120.2
          pack zip    *

Miscellaneous
        * Disable `CheckPath' in `config.main'.

        * Enable `EchoMail4D' in `config.gate'.


File: fidogate.info,  Node: Example Node,  Next: Usage,  Prev: Example Point 2,  Up: Basic

Example Leaf Node configuration
===============================

Let's assume the following addresses:

   Fido main address 2:2499/123

   Uplink (NetMail and EchoMail) 2:2499/100

   Local gateway address 2:2499/123.1

   Two points, Max Mueller @ 2:2499/123.10, Sabine Meier @ 2:2499/123.11

Address configuration `config.gate' (uplink is node address!):

     Address 2:2499/123.1
     Uplink  2:2499/123

Address configuration `config.main' (no uplink here!):

     Address 2:2499/123

Routing configuration `routing': NetMail for the two points will be
remapped to their point addresses, everything else to the gateway (where
you will be reading your mail). NetMail for all points is `send' onto
hold, everything else `route'd to your uplink. EchoMail is alway put
onto hold.

     remap 2:2499/123.0 2:2499/123.10 "Max Mueller"
     remap 2:2499/123.0 2:2499/123.11 "Sabine Meier"
     remap 2:2499/123.0 2:2499/123.1  "*"
     
     NetMail
     send  hold   2:2499/123.*
     route normal 2:2499/100 1:* 2:* 3:* 4:* 5:* 6:*
     
     EchoMail
     sendmove hold   2:2499/123.*
     sendmove normal *

Packer configuration `packing': no packing for the gateway address,
`zip' is the default archiver for everything else.

     arc zip "/usr/bin/zip -9gkjq %s %s"
     
     pack noarc  2:2499/123.1
     pack zip    *

Next, the EchoMail areas must be listed in the `areas.bbs' file. Do not
put your node address into `areas.bbs'! Example with two areas, both
subscribed by the gateway and your points (the directory `X' is not
used for EchoMail areas):

     Your system name!sysop name
     #X LINUX.GER 2:2499/100 123.1 .10 .11
     #X UNIX.GER  2:2499/100 123.1 .11

   `#' denotes a passthrough area, i.e. no packets for the own address
(2:2499/123) are created. All EchoMail will be send to the gateway (.1).

   In the gateway configuration, these areas must be listed in the
`areas' config file:

     LINUX.GER fido.ger.linux
     UNIX.GER  fido.ger.unix

   Now the gateway is able to process EchoMail. The program `ftnin'
should be run to gate any (unpacked) FTN outbound mail packet for
2:2499/123.1. The scripts `runin' and `runout' run the tosser for
processing the inbound and the gateway output, respectively.

   To use the `ftnaf' areafix, the gateway and the mail system must be
working. You can then install suitable aliases in `/etc/aliases':

     # Areafix/Filefix - FIDOGATE ftnaf
     areafix: "|/usr/local/lib/fidogate/ftnafmail"
     areamgr: areafix
     filefix: "|/usr/local/lib/fidogate/ftnafmail -F"
     filemgr: filefix

   That's it. I hope that this short chapter on basic configuration
clarifies some of the darker point of the FIDOGATE configuration.
Anyway, please help to improve the FIDOGATE documentation.


File: fidogate.info,  Node: Usage,  Next: RFC Headers,  Prev: Example Node,  Up: Top

FIDOGATE Usage
**************

* Menu:

* RFC Headers:: RFC Headers in FTN Messages
* X Headers::   X Headers in RFC Messages


File: fidogate.info,  Node: RFC Headers,  Next: X Headers,  Prev: Usage,  Up: Usage

RFC Headers in FTN Messages
===========================

FIDOGATE's `ftn2rfc' supports the following RFC headers at the start of
an FTN message. RFC headers must be the first text lines, max. 3 empty
lines before the RFC headers are allowed. Only one header line of each
type is allowed.

`From: address'
     Sets From header line. If set and the `areas' flag `-g' is on,
     messages will not be gated, because they are considered comming
     from another FTN-RFC gateway.

`Reply-To: address'
     Sets Reply-To header line.

`To: address'
     Sets To header line.

`Cc: address'
     Sets Cc header line.

`Bcc: address'
     Sets Bcc header line.

`Newsgroups: groups'
     Sets Newsgroups header line. NOT YET IMPLEMENTED.

`Sender: address'
     Sets Sender header line. NOT YET IMPLEMENTED.

`Content-Transfer-Encoding: 7bit | 8bit | quoted-printable'
     Sets content encoding type, overriding the default configured in
     `config.gate' (`NetMail8bit', `NetMailQuotedPrintable') or `areas'
     (`-8', `-Q').

   `ftn2rfc' sends mail to all addresses listed in To, Cc, and Bcc. It
support the RFC1036 standard address formats:

     user@do.main
     user@do.main (Real Name)
     Real Name <user@do.main>

   Multiple addresses can be separated by a `,'.


File: fidogate.info,  Node: X Headers,  Next: Index,  Prev: RFC Headers,  Up: Usage

X Headers in RFC Messages
=========================

FIDOGATE's `rfc2ftn' supports the following X headers in RFC messages:

`X-Comment-To: name'
     Use for the recipient's name in news articles.

`X-Flags: flags'
    `c'
          Message is crash.

    `p'
          Message is private (default for mail).

    `h'
          Message is hold.

    `f'
          Subject contains file attachment name.

    `r'
          Sets return receipt request.

    `m'
          Generates a FTN style `^MSGID', i.e. `^AMSGID: 'Z:N/F.P
          1234abcd. In addition, no `^AREPLY' kludge is generated. THIS
          FLAG IS NOT RECOMMENDED FOR NORMAL OPERATION!!!

    `n'
          Do not generate a From line, and the `^AREPLYADDR', `REPLYTO'
          kludges.


File: fidogate.info,  Node: Index,  Prev: X Headers,  Up: Top

Index
*****

* Menu:

* Aliases:                               Aliases.
* ArcMail:                               ftnpack.
* Areafix <1>:                           ftnafmail.
* Areafix:                               ftnaf.
* Areas:                                 Areas.
* areas.bbs:                             Areas.bbs.
* Bounce:                                ftnbounce.
* Bounce messages:                       Bounce.
* Busy files:                            ftnbsy.
* Checksum:                              sumcrc.
* Compiling:                             Compiling.
* Config <1>:                            Config.
* Config:                                ftnconfig.
* Config files:                          Config files.
* Configuration <1>:                     Example Node.
* Configuration <2>:                     Example Point 2.
* Configuration <3>:                     Example Point.
* Configuration <4>:                     Sendmail.
* Configuration:                         Basic.
* Connecting:                            Connecting.
* CRC:                                   sumcrc.
* EchoMail:                              Areas.bbs.
* Example <1>:                           Example Node.
* Example <2>:                           Example Point 2.
* Example:                               Example Point.
* ffx:                                   ffx.
* ffxbatch:                              ffxbatch.
* ffxmail:                               ffxmail.
* ffxqt <1>:                             ffxrun.
* ffxqt <2>:                             ffxrmail.
* ffxqt:                                 ffxqt.
* ffxrmail:                              ffxrmail.
* ffxrun:                                ffxrun.
* FIDONET:                               Connecting.
* File attach:                           ftnfattach.
* ftn2ftn:                               ftn2ftn.
* ftn2rfc <1>:                           ftnin.
* ftn2rfc:                               ftn2rfc.
* ftnaf <1>:                             ftnafmail.
* ftnaf:                                 ftnaf.
* ftnbounce:                             ftnbounce.
* ftnbsy:                                ftnbsy.
* ftnconfig:                             ftnconfig.
* ftnfattach:                            ftnfattach.
* ftnhatch:                              ftnhatch.
* ftnin:                                 ftnin.
* ftninpost:                             ftninpost.
* ftninrecomb:                           ftninrecomb.
* ftnlock:                               ftnlock.
* ftnlog:                                ftnlog.
* ftnpack:                               ftnpack.
* ftnroute:                              ftnroute.
* ftnseq:                                ftnseq.
* ftntick:                               ftntick.
* ftntoss:                               ftntoss.
* Gateway <1>:                           rfc2ftn.
* Gateway <2>:                           ftn2rfc.
* Gateway:                               ftn2ftn.
* Header <1>:                            X Headers.
* Header:                                RFC Headers.
* Hosts:                                 Hosts.
* Installation <1>:                      Compiling.
* Installation:                          Installation.
* Integration:                           Integration.
* Introduction <1>:                      Introduction.
* Introduction:                          Top.
* Lock files:                            ftnlock.
* Log file:                              ftnlog.
* Logging:                               ftnlog.
* Mail:                                  ffxmail.
* Node:                                  Example Node.
* Packing:                               Packing.
* Password:                              Passwd.
* pktdebug:                              pktdebug.
* Point <1>:                             Example Point 2.
* Point <2>:                             Example Point.
* Point:                                 Point.
* Programs:                              Programs.
* Remote Execution:                      ffxqt.
* Remote execution <1>:                  ffxbatch.
* Remote execution:                      ffx.
* RFC header:                            RFC Headers.
* rfc2ftn:                               rfc2ftn.
* Routing <1>:                           Routing.
* Routing:                               ftnroute.
* rundf:                                 rundf.
* runin:                                 runin.
* runout:                                runout.
* runtoss:                               runtoss.
* rununpack:                             rununpack.
* sendmail:                              Sendmail.
* sumcrc:                                sumcrc.
* Testing:                               Testing.
* Tossing <1>:                           rununpack.
* Tossing <2>:                           runtoss.
* Tossing <3>:                           runout.
* Tossing <4>:                           runin.
* Tossing <5>:                           rundf.
* Tossing:                               ftntoss.
* Usage:                                 Usage.
* X header:                              X Headers.


