X-Emacs-Mode: -*- indented-text -*-
Subject: FIDOGATE 4.3.1 --- Fido-Internet Gateway and Tosser
Keywords: fido ftn netmail echomail tosser areafix mail news gateway
Followup-To: comp.os.linux.misc

  ==================================================================
  FIDOGATE 4.3.1, a development snapshot of the new FIDOGATE release
  ==================================================================

			   FIDOGATE Version 4
		      ===========================
		        * Fido-Internet Gateway
			* Fido FTN-FTN Gateway
			* Fido Mail Processor
			* Fido File Processor
			* Fido Areafix/Filefix
		      ===========================


  Internet:
  =========
    http://www.fido.de/fidogate/
    ftp://ftp.fido.de/pub/fidogate/
    http://www.fido.de/pub/fidogate/

[NOT FOR DEVELOPMENT SNAPSHOTS! ...
    ftp://sunsite.unc.edu/pub/Linux/system/fido/
    http://sunsite.unc.edu/pub/Linux/system/fido/
    (probably still in .../pub/Linux/Incoming)
...]

    fidogate-4.3.1.tar.gz	1250 Kbyte

[NOT FOR DEVELOPMENT SNAPSHOTS! ...
  Fido File Request:
  ==================
    2:2452/110, 111  +49-241-876604  (V.34, ISDN V.110/X.75)
    
    fgate***.tgz		1250 Kbyte
...]


======================================================================

Changes in 4.3.1:

* logdaily: updated.

* logsendmail: major changes to analysis and output format.

* areasbbssync: -l creates diff listing for text output.

* runpoll-binkd: poll script using BinkD.

* out-rm*: updated.

* version.h code changed as follows:
    VERSION_MAJOR	major version number
    VERSION_MINOR	minor version number
    PATCHLEVEL		patchlevel
    STATE		development ./. stable
  Current version: 4.3.1 (development)

* Removed the last remaining ultra-ugly code from the original ifmail
  - shuffle.h and SHUFFLEBUFFERS! FIDOGATE now uses the new temporary
  string code in tmps.c with memory management throughout the various
  programs.
  This *may* result in some memory leaks in version 4.3.1, the new
  version is not yet thoroughly tested!

* An sprintf() replacement str_printf() is now used throughout the
  FIDOGATE code, avoiding potential buffer overflows. If your C
  library support snprinft() it will be used, otherwise FIDOGATE
  terminates with a fatal error if a buffer overflow occurs.

* Gateway programs: fixed some bugs with the new configuration file,
  GateAddr and the handling of the -a / -u command line options.

* All test cases have been updated to the new single configuration
  file fidogate.conf (that's internal for me, the test cases are not
  included in the source distribution).

* rfc2ftn: parsing of *.maus.de addresses removed, config options
  MausGate, MausDomain are now obsolete.



Changes in 4.3.0:

* New, and improved versions of the various runxxx scripts and the INN 
  interface scripts.

* General clean-up of scripts/ directory, obsolete ones removed.

* gate.cgi: new FIDOGATE status CGI script.

* Updated morannon example config files (NOT using the new single
  fidogate.conf, but the old 4.3a5 config files).

* runpoll: new generic version without the ffx programs (suitable for
  most FIDOGATE points).

* Allow configuration with only Address statements, Uplink or
  GateAddress is not necessary, if main and gateway address are the
  same. 

* Started to get rid of some of the ugly shuffle.h stuff.

* rfc2ftn: code to generate ^AORIGID removed (already disabled per
  default).

* config.make: NEW DEFAULT CONFIGURATION IS NOW A SINGLE CONFIG FILE
  /etc/fidogate/fidogate.conf FOR ALL PROGRAMS!!! (The different 4.3a5 
  config files can still be used by changing the corresponding
  definitions in config.make, line 91-98.

  Currently, there is only one example of the new single config file:
  examples/orodruin/fidogate.conf

* ftntoss: config option EchoMail4D renamed to TossEchoMail4D to avoid 
  conflicts with rfc2ftn configuration.



Changes in 4.3a5:

* ftntoss/ftn2rfc: bug-fix for processing packets with point
  addresses, should fix NetMail problems with non-point addresses in
  packets from/to point addresses.

* src/*/*.pl: improved and adapted to Perl5.

* ftntoss: new config options AddOtherAKAs, forces ftntoss to all AKAs 
  for the current zone to SEEN-BY.

* Config functions updated to support new option GateAddr, which will
  replace the multiple config files and the to some extent confusing
  Address/Uplink settings in the next FIDOGATE release. NO CHANGES IN
  THIS RELEASE YET!!!

* ftn2rfc: new config option NewsPathTail. If set to
  "fidogate!not-for-mail" it will make a correct setup of the INN
  newsfeeds entry for FIDOGATE much more easy, avoiding news being send
  back to the Fido uplink.

* ftn2rfc: fix for AI_2 alias processing of recipient address.



Changes in 4.3a4:

* ftn2rfc / areas: support for -C default:in:out charset option.

* Integrated various patches contributed by Andy Igoshin <ai@vsu.ru>,
  see contrib/fidogate-4.3a3-ai-pl9.1/ for some documentation and
  examples. Controlled by #define AI_x in config.h, not all of them
  are enabled per default.
  Also includes Russian charset mapping table.



Changes in 4.3a3:

* rununpack/runtoss: use correct config file (toss.conf), syslog
  support is there, but commented due to some problems with my perl
  installation. New LogFacility, LogLevel config options (toss.conf).

* ftnafutil: avoid error log messages for uplinks without uplink entry
  in passwd.

* packet writing code: no more ^AFMPT 0 (run-time configuration will
  be available for rfc2ftn in the future, don't use PASSTHRU_NETMAIL
  with this release!)

* charset mapping: old charset mapping code (charset.c) removed,
  replaced with new code using charset.bin (compiled version of
  charset.map), new config option CHARSETMAP (see config.make,
  common.conf).

* ftn2rfc: uses new charset mapping, new DefaultCharset,
  NetMailCharset config options (gate.conf).

* logcheck: bugfix, removed duplicate entries without -r option.

* ftnin: now supports FLO files with *.pkt entries.

* areasbbssync: new script for synchronizing INN's active and
  FIDOGATE's areas.bbs.



Changes in 4.3a2:

* New config examples for 4.3

* Perl scripts: config.pl now compiled into all perl scripts, -L/-S
  options removed from all perl scripts.

* rununpack: complete rewrite using perl.

* runtoss: complete rewrite using perl,
  new config (toss.conf) options: DiskFreeMin, DiskFreeMethod, DiskFreeProgram

* ftnaf/ftnafpkt: major changes to commands, external help file:

      Help for Areafix/Filefix, FIDOGATE 4.3
      
      Send mail
      
	To:      AreaFix @ Z:N/F.P
	     or  AreaMgr @ Z:N/F.P
	     or  FileFix @ Z:N/F.P
	     or  FileMgr @ Z:N/F.P
	Subject: PASSWORD [-l] [-q]
				^^-- same as QUERY command
			   ^^------- same as LIST command
      
      Commands in message body, optional prefix %% allowed:
      
	listall                      list all available areas
	list                         list areas available to node
	query                        list subscribed areas
	unlinked                     list unsubscribed areas
	from Z:N/F.P PASSWORD        set address and password
	passwd Z:N/F.P PASSWORD
	password Z:N/F.P PASSWORD
	+AREA                        subscribe to AREA
	AREA    
	subscribe AREA
	sub AREA
	-AREA                        unsubscribe from AREA
	unsubscribe AREA
	unsub AREA
	vacation AREA                set vacation flag for AREA
	&AREA [-options]             create new AREA
	new AREA [-options]
	~AREA                        delete AREA
	delete AREA
	comment TEXT                 arbitrary comment (ignored)
	help                         this help
      
      AREA names are not case-sensitive and support shell-style wildcards
	* ? [a-z] [abc], e.g. COMP.OS.*, [A-D]*.GER

  Now supports remote deletion and creation of areas (area key ~ and &
  for authorization).

* charsetc: new compiler for charset mapping tables. New mapping
  tables not yet implemented, though.

* logcheck/logsendmail: updated to sendmail 8.8.7

* out-rmbsy: updated.

* rfc2ftn: new option CheckAreasBBS, checking areas.bbs for downlinks
  when gating. Areas won't be gated if no downlink.

* rfc2ftn: new command line option -f / --batch-file BATCH, allows
  direct processing of INN's batch files in /var/spool/news/out.going
  without using the batcher, a major performance improvement.

* send-fidogate: adapted to new rfc2ftn -f BATCH.

* Busy files: use NFS-safe locking code.

* areas.bbs: new option -s STATE for storing state information of
  area. If set to 'U', the area is marked as not subscribed at the
  uplink, an appropiate note will be printed by ftnaf.

* ftnafutil: automatically
  * delete areas from areas.bbs with no uplink (ftnafutil delete)
  * send Areafix request to uplink, if
    - an area with state -s U has new downlinks (ftnafutil subscribe) or
    - an area with state -s S has no more downlinks (ftnafutil unsubscribe).

* passwd: new context "uplink" for ftnafutil Areafix requests.

* rununpack: don't remove extracted files, if archiver program fails.



Changes in 4.3a1:

* First release starting major restructuring of the FIDOGATEE code.

* syslog support.

* Totally new compile-time/run-time configuration controlled by
  DEFAULT_* macros in config.make.
    - compile-time defaults defined in config.make
    - run-time values can be set in config files (*.conf)
    - environment variables FIDOGATE_* to override

* New default directory structure (see doc/dirs.html for details):
    /etc/fidogate
    /var/lib/fidogate
    /var/lock/fidogate
    /var/log/fidogate
    /var/spool/fidogate
    /var/spool/bt
    /usr/lib/fidogate

* Config files renamed to common.conf, ffx.conf, gate.conf, toss.conf.

* config.h now only for system specific configuration.

* -L, -S options removed from all programs.

* Run-time configuration available to perl scripts.

* ftnoutpkt: new utility for creating FTN packets.

* New Areafix code structure.

* ftnafpkt: new Areafix utility reading/writing FTN packets.

* ftnpack: new commands dirmove, progn.

* ftnmail: new setuid frontend for rfc2ftn to be used by sendmail.

* contrib/*: new stuff contributed by FIDOGATE users

WARNING:
! Documentation not up-to-date !
! Examples not up-to-date ! (except examples/orodruin/)


======================================================================

Needed:

* GNU CC or ANSI C compiler
* GNU make
* GNU flex/bison or lex/yacc
* Perl5
* GNU m4 for the sendmail m4 configuration

===== fidogate.lsm ===================================================


======================================================================

$Date: 1999/03/19 17:05:20 $
Martin Junius
mailto:mj@fido.de
